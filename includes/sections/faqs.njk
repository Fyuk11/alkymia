<!-- sections/faqs.njk -->
<section id="faqs" class="faqs">
  <div class="container">
    <h2 class="section-title">{{ section_data.title }}</h2>
    
    <div class="faqs-grid">
      {% for item in section_data.items %}
      <div class="faq-card" onclick="toggleFAQ(this)">
        <div class="faq-question">
          <h3>{{ item.question }}</h3>
          <span class="toggle">+</span>
        </div>
        <div class="faq-answer">
          <p>{{ item.answer }}</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<script>
// Función global mejorada
function toggleFAQ(card) {
  // Cerrar otras FAQs
  const allCards = document.querySelectorAll('.faq-card');
  allCards.forEach(otherCard => {
    if (otherCard !== card && otherCard.classList.contains('active')) {
      otherCard.classList.remove('active');
    }
  });
  
  // Alternar esta FAQ
  card.classList.toggle('active');
  
  // Scroll suave si se abre
  if (card.classList.contains('active')) {
    setTimeout(() => {
      card.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'nearest',
        inline: 'nearest'
      });
    }, 300);
  }
}

// Mejorar accesibilidad con teclado
document.addEventListener('DOMContentLoaded', function() {
  const faqCards = document.querySelectorAll('.faq-card');
  
  faqCards.forEach(card => {
    // Hacer focusable para teclado
    card.setAttribute('tabindex', '0');
    
    // Agregar evento de teclado
    card.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleFAQ(this);
      }
    });
  });
  
  console.log('✅ FAQs elegantes inicializadas');
});
</script>